ğŸ“˜ MU-Cortex â€” Current Project Status (Updated)

This update extends the previous status and documents the successful Supabase ingestion pipeline, schema corrections, and data-integrity guarantees added after Gemini Vision extraction.

ğŸ§± PHASE 1 â€” FOUNDATION (SCHEME BRAIN) âœ… (Unchanged, Stable)

ğŸ¯ Goal
Create a reliable academic backbone before adding AI.

ğŸ—„ï¸ Database (Supabase) â€” Stable

Finalized schema (live):

users â€” scheme-locked students

subjects â€” scheme + semester + branch scoped

topics â€” module-level granularity

video_resources â€” cached YouTube results

channel_whitelist â€” trusted channel bias list

Key decisions (still valid):

Scheme isolation enforced at DB + API

UUID-based routing

RLS policies added incrementally & tested

â¡ï¸ No changes here after this phase.

ğŸ”§ Backend (FastAPI) â€” Stable

Completed APIs:

Endpoint	Purpose	Status
/health	Server check	âœ…
/subjects	Fetch subjects	âœ…
/topics	Module-wise topics	âœ…
/videos	Ranked YouTube videos	âœ…

Stability guarantees:

Input validation

Safe 404 handling

No crashes on bad UUIDs

Clean response contracts

â¡ï¸ Frozen intentionally.

ğŸ–¥ï¸ Frontend (Next.js App Router) â€” Stable

Completed flows:

Scheme lock + reset

Scheme persistence

Dashboard routing

Clean logout

Routes stabilized:

/ â†’ Landing
/dashboard â†’ Subjects
/dashboard/subject/[id] â†’ Topics
/dashboard/subject/[id]/[topic] â†’ Videos


â¡ï¸ Frontend remains render-only. No AI logic added.

ğŸ¤– PHASE 2 â€” AUTO-SCOUT (CORE VALUE) âœ… (Completed & Frozen)
ğŸ”¹ PERSON D â€” YouTube Foundation

YouTube API v3 enabled

Quota-aware usage

Stats endpoint integrated

Whitelist with soft bias

ğŸ”¹ PERSON B â€” Scout Agent (Frozen by Design)

What it does:

Topic-aware search

~20 candidates per query

Deduplication

Scoring (views, comments, relevance)

Soft whitelist bias

7-day caching

â¡ï¸ Logic intentionally locked to avoid instability.

ğŸ”¹ PERSON A â€” Frontend UX

Subjects dashboard

Topics grouped by module

Videos page with:

Auto search

Manual sub-topic search

Cache indicators

Skeleton loaders

Error states

ğŸ”„ END-TO-END FLOW â€” VERIFIED
Landing
 â†’ Scheme Lock
 â†’ Subjects
 â†’ Topics (Modules)
 â†’ Videos (Auto search)
 â†’ Optional sub-topic prompt
 â†’ Ranked + cached results


âœ”ï¸ Fully tested locally.

ğŸ§  PHASE 3 â€” PYQ INGESTION (MAJOR CHANGES + COMPLETED CORE)

This phase went through two iterations, with a major architectural pivot.

âŒ INITIAL APPROACH (ABANDONED)

Attempted pipeline:

PDF â†’ pdfplumber

OCR fallback via Tesseract

Raw text extraction

Regex + LLM parsing

Problems encountered:

MU PDFs contain:

Watermarks

Broken glyphs

Random character ordering

OCR output:

Semantically corrupted

Non-linear

Destroyed question numbering

Regex + LLM:

Extracted only 1â€“2 questions

Missed OR blocks and hierarchy

âš ï¸ Root cause:
OCR â‰  semantic document understanding.

â¡ï¸ Decision: Stop investing time here.

âœ… FINAL SOLUTION â€” GEMINI VISION (ADOPTED & VERIFIED)

ğŸ”¥ New Strategy

PDF â†’ Gemini 2.5 Flash Vision â†’ Structured Questions


No OCR.
No regex guessing.
No corrupted text.

New Script Introduced

pyq_pipeline/parse_pyq_vision.py

Capabilities:

Sends raw PDF bytes to Gemini Vision

Model understands:

Layout

Question hierarchy

OR blocks

Marks

Output:

Clean structured JSON

Confidence scores

Module inference

Verified Results:

14 / 14 questions extracted correctly

Marks accurate

OR questions preserved

Manual verification passed

âœ”ï¸ This fully solved extraction.

ğŸ—ƒï¸ DATA FLOW â€” UPDATED & COMPLETED
Step 1 â€” Vision Output
pyq_parsed/<paper>_vision.json

Step 2 â€” Supabase Ingestion (NEW & COMPLETED)

A fully scripted ingestion pipeline was implemented.

New Script

pyq_pipeline/ingest_questions.py

What it does:

Reads all JSON files from pyq_parsed/

Normalizes question text:

lowercase

punctuation removal

whitespace collapse

Generates SHA-256 hash for canonical deduplication

Inserts into questions table (one canonical row per unique question)

Inserts into question_appearances table (one row per exam occurrence)

Extracts:

year from appeared_in

confidence from Vision output

Idempotent (safe to re-run)

ğŸ—„ï¸ FINAL PYQ DATABASE SCHEMA (LIVE)
questions (canonical questions)
Column	Purpose
id	UUID
question_text	Canonical text
marks	2 / 5 / 10
topic_id	Nullable
normalized_hash	Deduplication
created_at	Timestamp
question_appearances (history & frequency)
Column	Purpose
question_id	FK â†’ questions
appeared_in	Exam name
year	Extracted
subject_id	FK
scheme_id	TEXT (2019 etc.)
confidence	Vision confidence
created_at	Timestamp

âœ… Single shared questions table across all subjects
âœ… Subject/scheme separation handled via appearances
âœ… Enables frequency analytics & prediction

ğŸ“Š INGESTION RESULTS (VERIFIED)

Papers ingested: 2 (AI Dec 2022, AI May 2025)

Canonical questions: 28

Question appearances: 29

One concept repeated with different wording â†’ correctly stored as separate questions

âœ”ï¸ Behavior confirmed correct
âœ”ï¸ Semantic merging deferred to predictor logic (Person B)

ğŸ”¹ OCR PIPELINE â€” CORRECTLY DOWNGRADED

Moved to ocr_fallback/

Preserved only for:

Handwritten scans

Extremely poor PDFs

No longer blocks progress

ğŸ•’ WHAT WE DELIBERATELY DEFERRED (UNCHANGED)
Deferred Item	Reason
Sub-topic granularity	Needs PYQ frequency first
Question difficulty scoring	Needs historical data
AI answer generation	Depends on clean DB
PYQ-based recommendations	Needs 5â€“6 papers
Vision batch automation	After DB scale
ğŸ§  KEY ARCHITECTURAL DECISIONS (REINFORCED)

âŒ Removed:

OCR-heavy pipelines

Regex-only parsing

Text-based PDF assumptions

âœ… Added:

Vision-based semantic parsing

Canonical + appearance separation

Idempotent ingestion

Future-proof analytics base

ğŸŸ¢ CURRENT STATE (FINAL)

Foundation: Stable

Auto-Scout: Frozen & reliable

PYQ extraction: Solved

PYQ ingestion: Live in Supabase

Data integrity: Verified

ğŸ‘‰ Person C responsibilities for Phase 3 are complete.
The system is now ready for Person B â€” prediction, ranking, and intelligence layers.